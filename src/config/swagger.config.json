{
    "swagger": "2.0",
    "info": {
        "title": "Link Up API Documentation",
        "version": "1.0.0",
        "description": "API for the Link Up Social Media Application",
        "contact": {
            "name": "Paul Sanga Nyamawi",
            "email": "paulsanganyamawi@gmail.com"
        },
        "licence": {
            "name": "TheJituLicence",
            "url": "www.thejitu.com"
        }
    },
    "host": "127.0.0.1:8080",
    "basePath": "/api/link-up/v1",
    "schemes": ["http"],
    "paths": {
        
        "/register": {
            "post": {
                "tags": ["User Authentication"],
                "summary": "Create a new user",
                "description": "Create a new user by providing user registration details.",
                "operationId": "newUserAccount",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "User registration details",
                        "required": true,
                        "schema": {"$ref": "#/definitions/User"}
                    }
                ],
                "responses": {
                    "201": {
                        "description": "User registred successfully"
                    },
                    "400": {
                        "description": "Empty or no request body was provided"
                    },
                    "409":{
                      "description": "Email address provided is already registered"
                    },
                    "422": {
                        "description": "Validation on user input failed"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },

        "/verify-user":{
            "post": {
                "tags": ["User Authentication"],
                "summary": "Verify registered user",
                "description": "Chenges user password from the OTP to a new password and set user's account to verified",
                "operationId": "verifyUserAccount",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "User verfication credentials",
                        "required": true,
                        "schema": {"$ref": "#/definitions/VerifyUserRegistration"}
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User verification successfully"
                    },
                    "400": {
                        "description": "Empty or no request body was provided"
                    },
                    "409": {
                        "description": "Invalid login credentials"
                    },
                    "422": {
                        "description": "Validation on user input failed"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },

        "/login": {
            "post": {
                "tags": ["User Authentication"],
                "summary": "Authenticates user",
                "description": "Authenticates user based off of the login credentials provided.",
                "operationId": "userLogin",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in":"body",
                        "name": "body",
                        "description": "User login credentials",
                        "required": true,
                        "schema": {"$ref": "#/definitions/LoginCredentials"}
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User login successfully"
                    },
                    "400": {
                        "description": "Empty or no request body was provided"
                    },
                    "401":{
                      "description": "Invalid login credentials"
                    },
                    "409": {
                        "description": "Invalid login credentials"
                    },
                    "422": {
                        "description": "Validation on user input failed"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },

        "/forgot-password":{
            "post": {
                "tags": ["User Authentication"],
                "summary": "Sends user a reset password token",
                "description": "Expects user email, the one he created the account with, and sends a reset password token to that email address.",
                "operationId": "userForgotPassword",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "User's email address",
                        "required": true,
                        "schema": {"$ref":"#/definitions/UserEmail"}
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Reset token sent to user's email address"
                    },
                    "400": {
                        "description": "Empty or no request body was provided"
                    },
                    "409": {
                        "description": "Invalid email address"
                    },
                    "422": {
                        "description": "Validation on user email input failed"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },

        "/validate-reset-password-token": {
            "post": {
                "tags": ["User Authentication"],
                "summary": "Validates the reset password token sent to the user's email address",
                "description": "Prompts user to provide the reset password token received and validates it.",
                "operationId": "validateResetPasswordToken",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "Reset password token validation schema",
                        "required": true,
                        "schema": {"$ref": "#/definitions/ResetPasswordRequestSchema"}
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Validation successful"
                    },
                    "400": {
                        "description": "Empty or no request body was provided"
                    },
                    "409": {
                        "description": "Invalid email address or reset password token"
                    },
                    "422": {
                        "description": "Validation on user email and token input failed"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },

        "/set-new-password": {
            "post": {
                "tags": ["User Authentication"],
                "summary": "Set a new password for the user",
                "description": "Prompts user to set a new password for their account.",
                "operationId": "SetNewPassword",
                "consumes": ["application/json"],
                "produces": ["application/json"],
                "parameters": [
                    {
                        "in": "body",
                        "name": "body",
                        "description": "User email and new password",
                        "required": true,
                        "schema": {"$ref": "#/definitions/SetNewPassword"}
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Password reset successful"
                    },
                    "400": {
                        "description": "Empty or no request body was provided"
                    },
                    "409": {
                        "description": "Invalid email address"
                    },
                    "422": {
                        "description": "Validation on user inputs failed"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        }

    },
    "definitions": {

        "User": {
            "type": "object",
            "required": ["firstName", "lastName", "email", "profilePicture"],
            "properties": {
                "firstName": {
                    "type": "string",
                    "description": "User's first name",
                    "example": "Paul"
                },
                "lastName": {
                    "type": "string",
                    "description": "User's last name",
                    "example": "Sanga"
                },
                "email": {
                    "type": "string",
                    "description": "User's email address",
                    "example": "paul.nyamawi99@gmail.com"
                },
                "profilePicture": {
                    "type": "string",
                    "description": "User's profile picture",
                    "example": "https://www.google.com/imgres?imgurl=https%3A%2F%2Fwallpapercg.com%2Fdownload%2Fyuji-itadori-3840x2743-9543.jpg&tbnid=u9FKufbPMLQ2EM&vet=12ahUKEwibov3YmZOBAxXQkicCHat8CkAQMyhLegUIARClAg..i&imgrefurl=https%3A%2F%2Fwallpapercg.com%2Fyuji-itadori-wallpapers&docid=sk23cipVVPF6mM&w=3840&h=2743&q=itadori&ved=2ahUKEwibov3YmZOBAxXQkicCHat8CkAQMyhLegUIARClAg"
                }
            } 
        },

        "LoginCredentials": {
            "type": "object",
            "required": ["email", "userPassword"],
            "properties": {
                "email": {
                    "type": "string",
                    "description": "User's email address",
                    "example": "paul.nyamawi99@gmail.com"
                },
                "userPassword": {
                    "type": "string",
                    "description": "User's password",
                    "example": "pajoy9903"
                }
            }
        },

        "VerifyUserRegistration": {
            "type": "object",
            "required": ["email", "userPassword", "newPassword"],
            "properties": {
                "email": {
                    "type": "string",
                    "description": "User's email address",
                    "example": "paul.nyamawi99@gmail.com"
                },
                "userPassword": {
                    "type": "string",
                    "description": "OTP sent to the user's email address",
                    "example": "daightrdfn"
                },
                "newPassword": {
                    "type": "string",
                    "description": "User's password",
                    "example": "pajoy9903"
                }
            }
        },

        "UserEmail": {
            "type": "object",
            "required": ["email"],
            "properties": {
                "email": {
                    "type": "string",
                    "description": "User's email address",
                    "example": "paul.nyamawi99@gmail.com"
                }
            }
        },

        "ResetPasswordRequestSchema": {
            "type": "object",
            "required": ["email", "resetPasswordToken"],
            "properties": {
                "email": {
                    "type": "string",
                    "description": "User's email address",
                    "example": "paul.nyamawi99@gmail.com"
                },
                "resetPasswordToken": {
                    "type": "string",
                    "description": "User's password",
                    "example": "4457112d2c9673a1"
                }
            }
        },

        "SetNewPassword": {
            "type": "object",
            "required": ["email", "userPassword"],
            "properties": {
                "email": {
                    "type": "string",
                    "description": "User's email address",
                    "example": "paul.nyamawi99@gmail.com"
                },
                "userPassword": {
                    "type": "string",
                    "description": "User's password",
                    "example": "Test@12345."
                }
            }
        }

    }
}